(function(e){function t(t){for(var i,s,r=t[0],l=t[1],c=t[2],p=0,d=[];p<r.length;p++)s=r[p],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&d.push(n[s][0]),n[s]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);h&&h(t);while(d.length)d.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],i=!0,r=1;r<a.length;r++){var l=a[r];0!==n[l]&&(i=!1)}i&&(o.splice(t--,1),e=s(s.s=a[0]))}return e}var i={},n={app:0},o=[];function s(t){if(i[t])return i[t].exports;var a=i[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=i,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(a,i,function(t){return e[t]}.bind(null,i));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=t,r=r.slice();for(var c=0;c<r.length;c++)t(r[c]);var h=l;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";a("85ec")},1419:function(e,t,a){"use strict";a("ba93")},"2a13":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d"),a("ac1f"),a("5319"),a("4d63"),a("25f0");var i=a("2b0e"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("HelloWorld",{attrs:{msg:"Welcome to Your Vue.js App"}})],1)},o=[],s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"hello"},[a("LeftTabMenu",{on:{changeContent:e.changeContent}}),a("div",{staticClass:"right-part"},[a("div",{staticClass:"content"},[a("Content",{attrs:{types:["设备概貌图","频率检测"],name:e.name,dataInfo:e.select_data}})],1)])],1)},r=[],l=(a("b0c0"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"menu"},[e._m(0),a("div",{staticClass:"search el-menu-item "},[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.search_value,callback:function(t){e.search_value=t},expression:"search_value"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})])],1),a("div",{staticClass:"left-tab-menu"},[a("el-col",{attrs:{span:12}},[void 0!==e.nodes?a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{collapse:!1,"default-openeds":e.groupNames},on:{open:e.handleOpen,close:e.handleClose}},e._l(e.nodes,(function(t,i){return a("el-submenu",{key:i,attrs:{index:i,"default-openeds":e.companyNames}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-location"}),a("span",[e._v(e._s(i))])]),e._l(t,(function(t,n){return a("el-submenu",{key:n,attrs:{index:n,"default-openeds":e.factoryNames}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-s-cooperation"}),e._v(e._s(n))]),e._l(t,(function(t,o){return a("el-submenu",{key:o,attrs:{index:o,"default-openeds":e.equipmentNames}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-s-flag"}),e._v(e._s(o))]),e._l(t,(function(t,s){return a("div",{key:s},[!0===e.companyVisible[i][n][o][s]?a("el-menu-item",{attrs:{index:s},on:{click:e.selectNode}},[a("i",{staticClass:"el-icon-setting",style:{color:function(){return"断网"===e.nodes[i][n][o][s]["alarmalias"]?"#ff0000":"#ffffff"}()}}),e._v(e._s(s)+" ")]):e._e()],1)}))],2)}))],2)}))],2)})),1):void 0===e.nodes?a("el-empty",{staticStyle:{width:"240px"},attrs:{description:e.tree_description}}):e._e()],1)],1)])}),c=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"head el-menu-item"},[a("i",{staticClass:"el-icon-cloudy-and-sunny",staticStyle:{color:"white"}}),a("span",{staticStyle:{"font-size":"24px",color:"white"}},[e._v("在线监测平台")])])}],h=a("b85c"),p=(a("d3b7"),a("6062"),a("3ca3"),a("ddb0"),a("a630"),{name:"LeftTabMenu",data:function(){return this.getNodeId(),{isCollapse:!0,search_value:"",nodes:void 0,tree_description:"正在获取节点信息...",companyVisible:{},groupNames:[],companyNames:[],factoryNames:[],equipmentNames:[]}},props:{},watch:{search_value:function(e){for(var t in this.$data.nodes){var a=this.$data.nodes[t];for(var i in a){var n=a[i];for(var o in n){var s=n[o];for(var r in s)-1===s[r].equipmentname.indexOf(e)?this.companyVisible[t][i][o][r]=!1:this.companyVisible[t][i][o][r]=!0}}}}},methods:{handleOpen:function(e,t){console.log(e,t)},handleClose:function(e,t){console.log(e,t)},selectNode:function(e){var t=e.indexPath[e.indexPath.length-1],a=this.searchNodes(e.indexPath);this.$emit("changeContent",a,t)},searchNodes:function(e){for(var t in this.$data.nodes)if(t===e[0]){var a=this.$data.nodes[t];for(var i in a)if(i===e[1]){var n=a[i];for(var o in n)if(o===e[2]){var s=n[o];for(var r in s)if(r===e[3])return s[r]}}}},getNodeId:function(){var e=this;this.$axios({method:"get",url:"/node/info",responseType:"json"}).then((function(t){var a,i=t.data,n=i.data,o=Object(h["a"])(n);try{for(o.s();!(a=o.n()).done;){var s=a.value;e.getStatus(s["nodeid"])}}catch(r){o.e(r)}finally{o.f()}})).catch((function(t){console.log(t),e.$data.tree_description="获取节点信息失败",e.$notify.error({title:"网络错误",message:"获取节点信息失败"})})).then((function(){}))},getStatus:function(e){var t=this;this.$axios({method:"get",url:"/equipment/node/"+e+"/info",responseType:"json"}).then((function(e){var a=e.data;console.log(a);var i,n=a.data,o={},s=new Set,r=new Set,l=new Set,c=new Set,p=Object(h["a"])(n);try{for(p.s();!(i=p.n()).done;){var d=i.value;o[d.groupname]||(o[d.groupname]={},t.companyVisible[d.groupname]={}),o[d.groupname][d.companyname]||(o[d.groupname][d.companyname]={},t.companyVisible[d.groupname][d.companyname]={}),o[d.groupname][d.companyname][d.factoryname]||(o[d.groupname][d.companyname][d.factoryname]={},t.companyVisible[d.groupname][d.companyname][d.factoryname]={}),o[d.groupname][d.companyname][d.factoryname][d.equipmentname]=d,t.companyVisible[d.groupname][d.companyname][d.factoryname][d.equipmentname]=!0,s.add(d.groupname),r.add(d.companyname),l.add(d.factoryname),c.add(d.equipmentname)}}catch(u){p.e(u)}finally{p.f()}t.groupNames=Array.from(s),t.companyNames=Array.from(r),t.factoryNames=Array.from(l),t.equipmentNames=Array.from(c),t.$data.nodes=o,console.log(o)})).catch((function(e){t.$notify.error({title:"网络错误",message:"获取设备信息失败"}),t.$data.tree_description="获取设备信息失败",console.log(e)})).then((function(){}))}}}),d=p,u=(a("1419"),a("2877")),m=Object(u["a"])(d,l,c,!1,null,null,null),f=m.exports,y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.dataInfo.equipmentuuid?a("el-tabs",{staticClass:"tabs",attrs:{type:"border-card"}},e._l(e.types,(function(t){return a("el-tab-pane",{key:t,attrs:{label:t}},[a("ImageCanvas",{attrs:{name:e.name,type:t,dataInfo:e.dataInfo}})],1)})),1):a("el-empty",{attrs:{description:"请选择设备",image:"./loading.png","image-size":500}})],1)},v=[],b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:18}},[a("div",{ref:"boxes",staticClass:"grid-content bg-purple"},["设备概貌图"===e.type?a("div",[e.fresh?a("div",{key:e.imageMultiplier},[a("img",{staticClass:"image",style:{width:e.imageWidth*e.imageMultiplier+"px",height:e.imageHeight+"px"},attrs:{src:"data:image/jepg;base64,"+e.base64image,alt:"示意图"}}),a("div",{ref:"boxContainer",staticClass:"boxes-container",style:{width:e.imageWidth*e.imageMultiplier+"px",height:e.imageHeight+"px"}},[e.equipmentName?a("div",{staticClass:"header box",style:{width:e.equipmentName.width*e.imageMultiplier+"px",height:e.equipmentName.height+"px",left:e.equipmentName.xpos*e.imageMultiplier+"px",top:e.equipmentName.ypos+"px"}},[e._v(e._s(e.equipmentName.name))]):e._e(),e.equipmentRevInfo?a("div",{staticClass:"header box",style:{width:e.equipmentRevInfo.width*e.imageMultiplier+"px",height:e.equipmentRevInfo.height+"px",left:e.equipmentRevInfo.xpos*e.imageMultiplier+"px",top:e.equipmentRevInfo.ypos+"px"}},[e._v(e._s(e.equipmentRevInfo.revname)+":"+e._s(e.equipmentRevInfo.revvalue))]):e._e(),e.equipmentTime?a("div",{staticClass:"header box",style:{width:e.equipmentTime.width*e.imageMultiplier+"px",height:e.equipmentTime.height+"px",left:e.equipmentTime.xpos*e.imageMultiplier+"px",top:e.equipmentTime.ypos+"px"}},[e._v(e._s(e.equipmentTime.time))]):e._e(),e._l(e.boxPoints,(function(t,i){return a("div",{key:i,class:t.width*t.height===0?"no":"box",style:{width:t.width*e.imageMultiplier+"px",height:t.height+"px",left:t.xpos*e.imageMultiplier+"px",top:t.ypos+"px",backgroundColor:e.imageBackground}},e._l(t.points,(function(t,i){return a("div",{key:i,staticClass:"info_piece"},[e._v(" "+e._s(t.pointid)+":"+e._s(t.value)+" ")])})),0)}))],2),e.showImage?a("div",[a("e-charts",{style:{width:e.imageWidth*e.imageMultiplier+"px"},attrs:{option:e.chartOption}}),a("br")],1):e._e()]):e._e()]):a("div",[e.showImage?a("e-charts",{attrs:{option:e.chartOption}}):e._e(),e.showImage?a("e-charts",{attrs:{option:e.revOption}}):e._e(),e.showImage?a("e-charts",{staticStyle:{height:"50vh"},attrs:{option:e.waveOption},on:{dataZoom:e.onDataZoom,clickChart:e.onClick}}):e._e(),e.showImage?a("e-charts",{attrs:{option:e.spectrumOption}}):e._e(),a("br")],1)])]),a("el-col",{staticStyle:{"z-index":"2000",position:"fixed",right:"3vh",top:"8vh",padding:"8px","min-width":"min-content"},attrs:{span:4}},[a("div",{staticClass:"grid-content bg-purple"},[a("InfoMenu",{ref:"info",attrs:{name:e.name,type:e.type,"equipment-u-u-i-d":e.dataInfo.equipmentuuid},on:{showCanvas:e.showCanvas,drawData:e.drawData,drawWaveAndSpectrumAndSoOn:e.drawWaveAndSpectrumAndSoOn}})],1)]),a("el-dialog",{attrs:{visible:e.dialogVisible,width:"90vw",top:"5vh","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("e-charts",{staticStyle:{width:"88vw",height:"78vh"},attrs:{option:e.activeOption},on:{dataZoom:e.onDataZoom}})],1)],1)},g=[],x=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",{staticClass:"box-card"},[a("h3",{staticClass:"title"},[e._v("操作菜单")]),a("div",{staticClass:"piece"},[e._v(" 设备名称:"+e._s(e.name)+" ")]),a("el-switch",{attrs:{"active-text":"显示图谱","inactive-text":"关闭图谱"},on:{change:e.change},model:{value:e.openChart,callback:function(t){e.openChart=t},expression:"openChart"}}),a("keep-alive",[e.openChart?a("div",{staticClass:"panel"},[a("div",{staticClass:"piece"},[a("div",[e._v(" 类型选择: "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value,disabled:e.disabled}})})),1)],1),a("br"),-1!==e.value.indexOf("振动")?a("div",[e._v(" 特征选择: "),a("el-select",{attrs:{placeholder:"请选择","default-first-option":""},model:{value:e.statusValue,callback:function(t){e.statusValue=t},expression:"statusValue"}},e._l(e.statusOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value,disabled:e.disabled}})})),1)],1):e._e(),a("el-divider",[a("i",{staticClass:"el-icon-monitor"})]),a("div",[a("el-select",{attrs:{clearable:!0,filterable:!0,multiple:"",placeholder:"请选择"},model:{value:e.selectEquipments,callback:function(t){e.selectEquipments=t},expression:"selectEquipments"}},e._l(e.equipmentOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-divider",[a("i",{staticClass:"el-icon-data-analysis"})]),a("el-switch",{attrs:{"inactive-text":"实时模式","active-text":"历史模式"},on:{change:e.changeDataMode},model:{value:e.dataMode,callback:function(t){e.dataMode=t},expression:"dataMode"}}),e.dataMode?a("div",[a("br"),e._v(" 起始日期: "),a("el-date-picker",{attrs:{align:"right",type:"date",placeholder:"选择日期","picker-options":e.pickerOptions},model:{value:e.startDate,callback:function(t){e.startDate=t},expression:"startDate"}}),e._v(" 结束日期: "),a("el-date-picker",{attrs:{align:"right",type:"date",placeholder:"选择日期","picker-options":e.pickerOptions},model:{value:e.endDate,callback:function(t){e.endDate=t},expression:"endDate"}})],1):e._e(),a("el-divider",[a("i",{staticClass:"el-icon-receiving"})]),a("el-button",{staticStyle:{width:"60%"},attrs:{type:e.stop_switch_type},on:{click:e.stopSwitch}},[e._v(e._s(e.stop_switch))])],1)]):e._e()])],1)},w=[],O=a("5118"),S={name:"InfoMenu",props:{name:String,equipmentUUID:String,type:String},data:function(){return this.getMessage(this.equipmentUUID),{openChart:!1,dataMode:!1,stop_switch:"停止",stop_switch_type:"primary",options:[],pickerOptions:{disabledDate:function(e){return e.getTime()>Date.now()},shortcuts:[{text:"今天",onClick:function(e){e.$emit("pick",new Date)}},{text:"昨天",onClick:function(e){var t=new Date;t.setTime(t.getTime()-864e5),e.$emit("pick",t)}},{text:"一周前",onClick:function(e){var t=new Date;t.setTime(t.getTime()-6048e5),e.$emit("pick",t)}}]},startDate:"",endDate:"",historyDate:{start:0,end:0},value:"",statusOptions:[{value:"all",label:"通频"},{value:"one",label:"1倍频幅值"},{value:"two",label:"2倍频幅值"},{value:"three",label:"3倍频幅值"},{value:"half",label:"1/2倍频幅值"},{value:"res",label:"残振"},{value:"dc",label:"直流量"},{value:"gap",label:"间隙电压"},{value:"phaseone",label:"1倍频相位"},{value:"phasetwo",label:"2倍频相位"},{value:"phasethree",label:"3倍频相位"},{value:"phasehalf",label:"1/2倍频相位"}],statusValue:"all",trendStatusValues:{},historyTrendStatusValues:{},selectEquipments:[],FrequencyData:{},equipmentOptions:[],data:[],cache:{},equipmentDataTimer:!1,defaultProps:{children:"children",label:"label"}}},watch:{equipmentUUID:function(e,t){var a=this;this.equipmentUUID=e;var i=function(){a.cache[a.type]||(a.cache[a.type]={}),a.cache[a.type][t]||(a.cache[a.type][t]={}),a.cache[a.type][t].startDate=a.startDate,a.cache[a.type][t].endDate=a.endDate,a.cache[a.type][t].value=a.value,a.cache[a.type][t].stop_switch=a.stop_switch,a.cache[a.type][t].stop_switch_type=a.stop_switch_type,a.cache[a.type][t].selectEquipments=a.selectEquipments,a.cache[a.type][t].statusValue=a.statusValue,a.cache[a.type][t].dataMode=a.dataMode,a.cache[a.type][t].openChart=a.openChart,a.cache[a.type][e]||(a.cache[a.type][e]={},a.cache[a.type][e].startDate="",a.cache[a.type][e].endDate="",a.cache[a.type][e].value="",a.cache[a.type][e].stop_switch="停止",a.cache[a.type][e].stop_switch_type="primary",a.cache[a.type][e].selectEquipments=[],a.cache[a.type][e].statusValue="all",a.cache[a.type][e].dataMode=!1,a.cache[a.type][e].openChart=a.openChart),a.startDate=a.cache[a.type][e].startDate,a.endDate=a.cache[a.type][e].endDate,a.value=a.cache[a.type][e].value,a.stop_switch=a.cache[a.type][e].stop_switch,a.stop_switch_type=a.cache[a.type][e].stop_switch_type,a.selectEquipments=a.cache[a.type][e].selectEquipments,a.statusValue=a.cache[a.type][e].statusValue,a.dataMode=a.cache[a.type][e].dataMode,a.openChart=a.cache[a.type][e].openChart,a.change(),a.stopSwitch()};this.getMessage(e,i)},value:function(e){this.selectEquipments=[],this.genData(e)},startDate:function(e){if(e&&(this.historyDate.start=e.getTime(),!this.historyDate.start>this.historyDate.end)){var t,a=Object(h["a"])(this.selectEquipments);try{for(a.s();!(t=a.n()).done;){var i=t.value;this.handleHistory(i)}}catch(n){a.e(n)}finally{a.f()}}},endDate:function(e){if(e)if(this.historyDate.end=e.getTime(),this.historyDate.start>this.historyDate.end)this.$notify.error({title:"时间错误",message:"起始日期晚于结束日期"});else if(0===this.historyDate.start||0===this.historyDate.end)this.$notify.info({title:"选择时间",message:"请选择起始/结束时间"});else{var t,a=Object(h["a"])(this.selectEquipments);try{for(a.s();!(t=a.n()).done;){var i=t.value;this.handleHistory(i)}}catch(n){a.e(n)}finally{a.f()}}}},methods:{handleCheckChange:function(e,t,a){console.log(e,t,a)},handleHistory:function(e){var t=this,a=this;this.$axios.get("/trend/"+this.equipmentUUID+"/"+e+"/"+this.historyDate.start+"/"+this.historyDate.end+"/info").then((function(i){var n,o=i.data.data[0],s=[],r=[],l=o.trendInfos,c=Object(h["a"])(l);try{for(c.s();!(n=c.n()).done;){var p=n.value;a.historyTrendStatusValues[e]||(a.historyTrendStatusValues[e]=[]);var d=new Date(p.trendtime).format("yyyy-MM-dd hh:mm:ss");s.push(d),r.push(p.rev),a.historyTrendStatusValues[e].push([d,p.trendValues[a.statusValue]])}}catch(u){c.e(u)}finally{c.f()}a.$emit("drawData",a.historyTrendStatusValues[e],e,void 0,void 0,s,r),"频率检测"===a.type&&a.selectEquipments[0]===e&&(console.log("nothing"),t.$axios.get("/wave-spectrum/"+t.equipmentUUID+"/"+e+"/"+l[0].trendtime+"/16384/0/info").then((function(t){var i=t.data.data[0],n={x:JSON.parse(i.trendSpectrumvalue.spectrumx),y:JSON.parse(i.trendSpectrumvalue.spectrumy)},o={x:JSON.parse(i.trendWavevalue.wavex),y:JSON.parse(i.trendWavevalue.wavey)};a.$emit("drawWaveAndSpectrumAndSoOn",n,o,e,!0)})).catch((function(e){console.log(e),a.$notify.error({title:"网络错误",message:"获取历史数据失败"})})))})).catch((function(e){console.error(e),a.$notify.error({title:"网络错误",message:"获取历史数据失败"})}))},change:function(){this.$emit("showCanvas",this.openChart),this.changeDataMode()},changeDataMode:function(){if(this.dataMode&&this.equipmentDataTimer)Object(O["clearInterval"])(this.equipmentDataTimer),this.equipmentDataTimer=!1;else if("恢复"!==this.$data.stop_switch&&!this.equipmentDataTimer){var e=this;this.equipmentDataTimer=Object(O["setInterval"])((function(){e.openChart||(Object(O["clearInterval"])(e.equipmentDataTimer),e.trendStatusValues={});var t,a=Object(h["a"])(e.selectEquipments);try{for(a.s();!(t=a.n()).done;){var i=t.value;e.getEquipmentData(i)}}catch(n){a.e(n)}finally{a.f()}}),2500)}},stopSwitch:function(){if("停止"===this.$data.stop_switch&&this.equipmentDataTimer)this.$data.stop_switch="恢复",this.$data.stop_switch_type="danger",Object(O["clearInterval"])(this.equipmentDataTimer),this.equipmentDataTimer=!1;else if(!this.equipmentDataTimer){this.$data.stop_switch="停止",this.$data.stop_switch_type="primary";var e=this;this.equipmentDataTimer=Object(O["setInterval"])((function(){e.openChart||(Object(O["clearInterval"])(e.equipmentDataTimer),e.equipmentDataTimer=!1);var t,a=Object(h["a"])(e.selectEquipments);try{for(a.s();!(t=a.n()).done;){var i=t.value;e.getEquipmentData(i)}}catch(n){a.e(n)}finally{a.f()}}),2500)}},getMessage:function(e,t){var a=this;this.$axios({method:"get",url:"/point/"+e+"/detail",responseType:"json"}).then((function(e){var i=e.data,n=i.data;a.data=n,a.parseData(n),t?t():a.value=a.options[0].value})).catch((function(){a.$notify.error({title:"网络错误",message:"获取设备测点信息失败"})})).then((function(){}))},parseData:function(e){var t=new Set;this.equipmentOptions=[],this.options=[];var a,i=Object(h["a"])(e);try{for(i.s();!(a=i.n()).done;){var n=a.value,o="径向",s=n.channeltypealias;n.channeltypealias.indexOf&&-1!==n.channeltypealias.indexOf("振动")&&(1===n.channeltype?s=o+s:2===n.channeltype&&(o="轴向",s=o+s)),t.has(s)||this.options.push({label:s,value:s}),t.add(s)}}catch(r){i.e(r)}finally{i.f()}},genData:function(e){this.equipmentOptions=[];var t,a=Object(h["a"])(this.data);try{for(a.s();!(t=a.n()).done;){var i=t.value,n="径向",o=i.channeltypealias;i.channeltypealias.indexOf&&-1!==i.channeltypealias.indexOf("振动")&&(1===i.channeltype?o=n+o:2===i.channeltype&&(n="轴向",o=n+o)),o===e&&this.equipmentOptions.push({uuid:i.pointuuid,label:i.pointname,value:i.pointid})}}catch(s){a.e(s)}finally{a.f()}},getEquipmentData:function(e){var t=this;this.$axios.get("/trend/"+this.equipmentUUID+"/"+e+"/real_time").then((function(a){var i=a.data.data[0],n=i.trendvalue;t.trendStatusValues[e]||(t.trendStatusValues[e]=[]);var o=new Date(i.trendtime).format("yyyy-MM-dd hh:mm:ss");if(t.trendStatusValues[e].push([o,n[t.statusValue]]),t.$emit("drawData",t.trendStatusValues[e],e,o,i.rev),"频率检测"===t.type&&t.selectEquipments[0]===e){var s={x:JSON.parse(i.trendSpectrumvalue.spectrumx),y:JSON.parse(i.trendSpectrumvalue.spectrumy)},r={x:JSON.parse(i.trendWavevalue.wavex),y:JSON.parse(i.trendWavevalue.wavey)};t.$emit("drawWaveAndSpectrumAndSoOn",s,r,e)}})).catch((function(){t.$notify.error({title:"网络错误",message:"获取图谱数据失败"})})).then((function(){}))}},beforeDestroy:function(){Object(O["clearInterval"])(this.equipmentDataTimer),this.equipmentDataTimer=!1}},C=S,_=(a("bd26"),Object(u["a"])(C,x,w,!1,null,"179634b9",null)),D=_.exports,q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"hello"},[a("v-chart",{staticClass:"chart",attrs:{option:e.option,resizable:!0},on:{resize:e.resize,datazoom:e.dataZoom,brushselected:e.click}})],1)},A=[],$=a("ade3"),M=a("5c7f"),k={name:"eCharts",components:{VChart:M["b"]},props:{option:Object},provide:Object($["a"])({},M["a"],"myTheme"),mounted:function(){},methods:{dataZoom:function(e){this.$emit("dataZoom",e)},click:function(e){e.batch[0].areas[0]&&this.$emit("clickChart",e.batch[0].areas[0].coordRange)},resize:function(){M["b"].resize()}}},I=k,W=(a("d7b3"),Object(u["a"])(I,q,A,!1,null,"132aeafa",null)),T=W.exports,j={name:"ImageCanvas",props:{name:String,dataInfo:Object,type:String},data:function(){this.getGraphImage(this.dataInfo.equipmentuuid);var e=this;return{base64image:"",fresh:!0,showImage:!1,imageWidth:0,imageHeight:0,imageBackground:"#4e4e43",boxPoints:[],equipmentName:{},equipmentRevInfo:{},equipmentTime:{},netStatus:!0,imageMultiplier:1,chartxAxis:[],chartyAxis:new Set,chartData:[],chartOption:{title:{text:this.name+"实时趋势图"},tooltip:{trigger:"axis"},legend:{data:this.chartData},grid:{top:"18%",left:"12%",right:"12%",bottom:"4%",containLabel:!0,width:"76%",height:"80%"},toolbox:{feature:{saveAsImage:{},dataZoom:{yAxisIndex:"none"},myExpand:{show:!0,title:"放大",icon:"path://M432.45,595.444c0,2.177-4.661,6.82-11.305,6.82c-6.475,0-11.306-4.567-11.306-6.82s4.852-6.812,11.306-6.812C427.841,588.632,432.452,593.191,432.45,595.444L432.45,595.444z M421.155,589.876c-3.009,0-5.448,2.495-5.448,5.572s2.439,5.572,5.448,5.572c3.01,0,5.449-2.495,5.449-5.572C426.604,592.371,424.165,589.876,421.155,589.876L421.155,589.876z M421.146,591.891c-1.916,0-3.47,1.589-3.47,3.549c0,1.959,1.554,3.548,3.47,3.548s3.469-1.589,3.469-3.548C424.614,593.479,423.062,591.891,421.146,591.891L421.146,591.891zM421.146,591.891",onclick:function(){e.openExpandWindow("chartOption")}}}},xAxis:{type:"category",boundaryGap:!1,data:this.chartxAxis,name:"时间"},yAxis:{type:"value",name:"um"},series:[]},revOption:{title:{text:this.name+"实时转速趋势图"},tooltip:{trigger:"axis"},legend:{data:["转速"]},grid:{top:"18%",left:"12%",right:"12%",bottom:"4%",containLabel:!0,width:"76%",height:"80%"},toolbox:{feature:{saveAsImage:{},dataZoom:{yAxisIndex:"none"},myExpand:{show:!0,title:"放大",icon:"path://M432.45,595.444c0,2.177-4.661,6.82-11.305,6.82c-6.475,0-11.306-4.567-11.306-6.82s4.852-6.812,11.306-6.812C427.841,588.632,432.452,593.191,432.45,595.444L432.45,595.444z M421.155,589.876c-3.009,0-5.448,2.495-5.448,5.572s2.439,5.572,5.448,5.572c3.01,0,5.449-2.495,5.449-5.572C426.604,592.371,424.165,589.876,421.155,589.876L421.155,589.876z M421.146,591.891c-1.916,0-3.47,1.589-3.47,3.549c0,1.959,1.554,3.548,3.47,3.548s3.469-1.589,3.469-3.548C424.614,593.479,423.062,591.891,421.146,591.891L421.146,591.891zM421.146,591.891",onclick:function(){e.openExpandWindow("chartOption")}}}},xAxis:{type:"category",name:"时间",boundaryGap:!1,data:this.chartxAxis},yAxis:{type:"value",name:"r/min"},series:[{name:"转速",type:"line",data:[],areaStyle:{}}]},spectrumOption:{title:{text:this.name+"实时频谱图"},tooltip:{trigger:"axis"},legend:{data:["频谱"]},grid:{top:"18%",left:"12%",right:"12%",bottom:"4%",containLabel:!0,width:"76%",height:"80%"},toolbox:{feature:{saveAsImage:{},dataZoom:{yAxisIndex:"none"},myExpand:{show:!0,title:"放大",icon:"path://M432.45,595.444c0,2.177-4.661,6.82-11.305,6.82c-6.475,0-11.306-4.567-11.306-6.82s4.852-6.812,11.306-6.812C427.841,588.632,432.452,593.191,432.45,595.444L432.45,595.444z M421.155,589.876c-3.009,0-5.448,2.495-5.448,5.572s2.439,5.572,5.448,5.572c3.01,0,5.449-2.495,5.449-5.572C426.604,592.371,424.165,589.876,421.155,589.876L421.155,589.876z M421.146,591.891c-1.916,0-3.47,1.589-3.47,3.549c0,1.959,1.554,3.548,3.47,3.548s3.469-1.589,3.469-3.548C424.614,593.479,423.062,591.891,421.146,591.891L421.146,591.891zM421.146,591.891",onclick:function(){e.openExpandWindow("spectrumOption")}}}},xAxis:{type:"category",boundaryGap:!1,data:[],name:"秒",axisLabel:{show:!0}},yAxis:{type:"value",name:"um"},series:[{name:"频谱",type:"line",data:[]}]},waveOption:{title:{text:this.name+"实时波形图",subtext:""},tooltip:{trigger:"axis"},grid:{top:"26%",left:"12%",right:"12%",bottom:"4%",containLabel:!0,width:"76%",height:"58%"},toolbox:{feature:{saveAsImage:{},dataZoom:{yAxisIndex:!1},brush:{type:["lineX","clear"]},myExpand:{show:!0,title:"放大",icon:"path://M432.45,595.444c0,2.177-4.661,6.82-11.305,6.82c-6.475,0-11.306-4.567-11.306-6.82s4.852-6.812,11.306-6.812C427.841,588.632,432.452,593.191,432.45,595.444L432.45,595.444z M421.155,589.876c-3.009,0-5.448,2.495-5.448,5.572s2.439,5.572,5.448,5.572c3.01,0,5.449-2.495,5.449-5.572C426.604,592.371,424.165,589.876,421.155,589.876L421.155,589.876z M421.146,591.891c-1.916,0-3.47,1.589-3.47,3.549c0,1.959,1.554,3.548,3.47,3.548s3.469-1.589,3.469-3.548C424.614,593.479,423.062,591.891,421.146,591.891L421.146,591.891zM421.146,591.891",onclick:function(){e.openExpandWindow("waveOption")}}}},brush:{xAxisIndex:"all",brushLink:"all",outOfBrush:{colorAlpha:.1}},dataZoom:[{type:"inside",start:0,end:10},{type:"slider",start:0,end:10,top:"85%"}],xAxis:{type:"category",boundaryGap:!1,data:[],name:"Hz"},yAxis:{type:"value",name:"um"},series:[{name:"波形",type:"line",sampling:"average",data:[]}]},dialogVisible:!1,dialogName:"",activeOption:{title:{text:"实时图"},tooltip:{trigger:"axis"},legend:{data:this.chartData},grid:{top:"8%",left:"8%",right:"8%",bottom:"8%",containLabel:!0},toolbox:{feature:{saveAsImage:{},dataZoom:{yAxisIndex:"none"}}},xAxis:{},yAxis:{},series:[]},screenWidth:document.body.clientWidth}},watch:{dataInfo:function(e){this.getGraphImage(e.equipmentuuid),Object(O["clearInterval"])(this.$interval)},imageWidth:function(e){this.imageWidth=e,this.imageMultiplier=.6*this.screenWidth/this.imageWidth},name:function(e){this.chartOption.title.text=e+"实时趋势图",this.waveOption.title.text=e+"实时波形图",this.spectrumOption.title.text=e+"实时频谱图",this.chartData=[],this.chartxAxis=[],this.chartyAxis.clear(),this.chartOption.xAxis.data=[],this.chartOption.series=[],this.chartOption.legend.data=[],this.revOption.xAxis.data=[],this.revOption.series[0].data=[],this.waveOption.xAxis.data=[],this.waveOption.series[0].data=[],this.spectrumOption.xAxis.data=[],this.spectrumOption.series[0].data=[]},screenWidth:function(e){if(this.screenWidth=e,!this.timer){this.timer=!0;var t=this;setTimeout((function(){t.imageMultiplier=.6*t.screenWidth/t.imageWidth,t.timer=!1}),200)}}},mounted:function(){var e=this;window.onresize=function(){return function(){window.screenWidth=document.body.clientWidth,e.screenWidth=window.screenWidth}()}},methods:{handleClose:function(e){this.$confirm("确认关闭？").then((function(){e()})).catch((function(){}))},openExpandWindow:function(e){this.activeOption.title.text=this[e].title.text,this.activeOption.xAxis=this[e].xAxis,this.activeOption.yAxis=this[e].yAxis,this.activeOption.series=this[e].series,this[e].dataZoom&&(this.activeOption.dataZoom=this[e].dataZoom),this[e].brush?this.activeOption.brush=this[e].brush:this.activeOption.brush=void 0,this.dialogVisible=!0},onClick:function(e){var t=this.waveOption.xAxis.data[e[0]],a=this.waveOption.xAxis.data[e[1]],i=1/(a-t);this.waveOption.title.subtext="ΔF = 1s / ( "+a+"s - "+t+"s ) = "+i.toPrecision(4)+" Hz"},onDataZoom:function(e){e.batch?this.dataZoom={start:e.batch[0].start,end:e.batch[0].end}:this.dataZoom={start:e.start,end:e.end}},drawData:function(e,t,a,i,n,o){if(-1===this.chartData.indexOf(t)&&this.chartData.push(t),a?(this.chartxAxis.push(a),this.revOption.title.text.replace("实时","历史"),this.chartOption.title.text.replace("实时","历史")):n&&(this.chartxAxis=n,this.revOption.title.text.replace("历史","实时"),this.chartOption.title.text.replace("历史","实时")),this.chartOption.legend.data=this.chartData,a&&this.chartxAxis.length>20&&this.chartxAxis.shift(),this.chartOption.xAxis.data=this.chartxAxis,this.revOption.xAxis.data=this.chartxAxis,void 0!==i?this.revOption.series[0].data.push(i):o&&(this.revOption.series[0].data=o),this.chartyAxis.has(t)){var s,r=Object(h["a"])(this.chartOption.series);try{for(r.s();!(s=r.n()).done;){var l=s.value;if(l.name===t){l.data=e;break}}}catch(p){r.e(p)}finally{r.f()}}else{var c={name:t,type:"line",data:e,areaStyle:{}};this.chartOption.series.push(c)}this.chartyAxis.add(t)},drawWaveAndSpectrumAndSoOn:function(e,t,a,i){this.spectrumOption.xAxis.data=e.x,this.spectrumOption.series[0].data=e.y,i?(this.spectrumOption.title.text=this.name+" "+a+" 历史频谱图",this.waveOption.title.text=this.name+" "+a+" 历史波形图"):(this.spectrumOption.title.text=this.name+" "+a+" 实时频谱图",this.waveOption.title.text=this.name+" "+a+" 实时波形图"),this.waveOption.xAxis.data=t.x,this.waveOption.series[0].data=t.y,this.waveOption.dataZoom&&this.dataZoom&&(this.waveOption.dataZoom[0].start=this.dataZoom.start,this.waveOption.dataZoom[0].end=this.dataZoom.end,this.waveOption.dataZoom[1].start=this.dataZoom.start,this.waveOption.dataZoom[1].end=this.dataZoom.end,this.activeOption.dataZoom&&(this.activeOption.dataZoom[0].start=this.dataZoom.start,this.activeOption.dataZoom[0].end=this.dataZoom.end,this.activeOption.dataZoom[1].start=this.dataZoom.start,this.activeOption.dataZoom[1].end=this.dataZoom.end))},showCanvas:function(e){this.showImage=e},getGraphImage:function(e){var t=this;this.$axios({method:"get",url:"/graph/"+e+"/info",responseType:"json"}).then((function(a){var i=a.data;t.$data.base64image=i.data[0]["graphimagebase64code"],t.$data.imageWidth=i.data[0].graphimagewidth,t.$data.imageHeight=i.data[0].graphimageheight,t.$data.imageBackground=i.data[0].graphimagebackground,t.updateData(e),t.$interval=Object(O["setInterval"])((function(){t.updateData(e)}),1e3)})).catch((function(){t.$notify.error({title:"网络错误",message:"获取图片失败"})})).then((function(){}))},updateData:function(e){var t=this;t.$axios.get("/graph/"+e+"/data").then((function(e){var a=e.data;t.$data.boxPoints=a.data[0].listboxes,t.$data.equipmentName=a.data[0].equipmentname,t.$data.equipmentRevInfo=a.data[0].revinfo,t.$data.equipmentTime=a.data[0].time})).catch((function(){t.netStatus&&(t.$notify({type:"error",message:"获取节点数据失败"}),t.netStatus=!1)})).then((function(){}))}},provide:{},components:{InfoMenu:D,eCharts:T},beforeDestroy:function(){Object(O["clearInterval"])(this.$interval)}},E=j,Z=(a("aa2b"),Object(u["a"])(E,b,g,!1,null,"afe90bce",null)),V=Z.exports,L={name:"Content",props:{types:Array,name:String,dataInfo:Object},components:{ImageCanvas:V}},N=L,z=(a("e550"),Object(u["a"])(N,y,v,!1,null,"154b6004",null)),P=z.exports,R={name:"HelloWorld",components:{Content:P,LeftTabMenu:f},props:{msg:String},data:function(){return{name:"",select_data:{}}},methods:{changeContent:function(e,t){console.log(e,t),this.$data.name=t,this.$data.select_data=e}}},U=R,H=(a("d508"),Object(u["a"])(U,s,r,!1,null,"02c1fec6",null)),J=H.exports,B={name:"App",components:{HelloWorld:J}},G=B,F=(a("034f"),Object(u["a"])(G,n,o,!1,null,null,null)),Y=F.exports,X=a("5c96"),K=a.n(X),Q=(a("a83d"),a("bc3a")),ee=a.n(Q),te=a("22b4"),ae=a("1be7"),ie=a("f95e"),ne=a("4cb5"),oe=a("3620"),se=a("acf6"),re=a("4b2a"),le=a("2da7"),ce=a("104d"),he=a("3094"),pe=a("9394"),de=a("b22b"),ue=a("ff32");te["a"]([ie["a"],ne["a"],re["a"],le["a"],ce["a"],le["a"],re["a"],he["a"],pe["a"],de["a"],ue["a"],oe["a"],se["a"]]),Date.prototype.format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var a in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),t)new RegExp("("+a+")").test(e)&&(e=e.replace(RegExp.$1,1===RegExp.$1.length?t[a]:("00"+t[a]).substr((""+t[a]).length)));return e};var me={color:["#dd6b66","#759aa0","#e69d87","#8dc1a9","#ea7e53","#eedd78","#73a373","#73b9bc","#7289ab","#91ca8c","#f49f42"],backgroundColor:"rgb(61,61,61)",textStyle:{},title:{textStyle:{color:"#eeeeee"},subtextStyle:{color:"#aaaaaa"}},line:{itemStyle:{borderWidth:"1"},lineStyle:{width:"2"},symbolSize:"15",symbol:"emptyPin",smooth:!0},radar:{itemStyle:{borderWidth:"1"},lineStyle:{width:"2"},symbolSize:"15",symbol:"emptyPin",smooth:!0},bar:{itemStyle:{barBorderWidth:"0",barBorderColor:"#ccc"}},pie:{itemStyle:{borderWidth:"0",borderColor:"#ccc"}},scatter:{itemStyle:{borderWidth:"0",borderColor:"#ccc"}},boxplot:{itemStyle:{borderWidth:"0",borderColor:"#ccc"}},parallel:{itemStyle:{borderWidth:"0",borderColor:"#ccc"}},sankey:{itemStyle:{borderWidth:"0",borderColor:"#ccc"}},funnel:{itemStyle:{borderWidth:"0",borderColor:"#ccc"}},gauge:{itemStyle:{borderWidth:"0",borderColor:"#ccc"}},candlestick:{itemStyle:{color:"#fd1050",color0:"#0cf49b",borderColor:"#fd1050",borderColor0:"#0cf49b",borderWidth:1}},graph:{itemStyle:{borderWidth:"0",borderColor:"#ccc"},lineStyle:{width:1,color:"#aaa"},symbolSize:"15",symbol:"emptyPin",smooth:!0,color:["#dd6b66","#759aa0","#e69d87","#8dc1a9","#ea7e53","#eedd78","#73a373","#73b9bc","#7289ab","#91ca8c","#f49f42"],label:{color:"#eee"}},map:{itemStyle:{areaColor:"#eee",borderColor:"#444",borderWidth:.5},label:{color:"#000"},emphasis:{itemStyle:{areaColor:"rgba(255,215,0,0.8)",borderColor:"#444",borderWidth:1},label:{color:"rgb(100,0,0)"}}},geo:{itemStyle:{areaColor:"#eee",borderColor:"#444",borderWidth:.5},label:{color:"#000"},emphasis:{itemStyle:{areaColor:"rgba(255,215,0,0.8)",borderColor:"#444",borderWidth:1},label:{color:"rgb(100,0,0)"}}},categoryAxis:{axisLine:{show:!0,lineStyle:{color:"#eeeeee"}},axisTick:{show:!0,lineStyle:{color:"#eeeeee"}},axisLabel:{show:!0,color:"#eeeeee"},splitLine:{show:!0,lineStyle:{color:["#aaaaaa"]}},splitArea:{show:!1,areaStyle:{color:["#eeeeee"]}}},valueAxis:{axisLine:{show:!0,lineStyle:{color:"#eeeeee"}},axisTick:{show:!0,lineStyle:{color:"#eeeeee"}},axisLabel:{show:!0,color:"#eeeeee"},splitLine:{show:!0,lineStyle:{color:["#aaaaaa"]}},splitArea:{show:!1,areaStyle:{color:["#eeeeee"]}}},logAxis:{axisLine:{show:!0,lineStyle:{color:"#eeeeee"}},axisTick:{show:!0,lineStyle:{color:"#eeeeee"}},axisLabel:{show:!0,color:"#eeeeee"},splitLine:{show:!0,lineStyle:{color:["#aaaaaa"]}},splitArea:{show:!1,areaStyle:{color:["#eeeeee"]}}},timeAxis:{axisLine:{show:!0,lineStyle:{color:"#eeeeee"}},axisTick:{show:!0,lineStyle:{color:"#eeeeee"}},axisLabel:{show:!0,color:"#eeeeee"},splitLine:{show:!0,lineStyle:{color:["#aaaaaa"]}},splitArea:{show:!1,areaStyle:{color:["#eeeeee"]}}},toolbox:{iconStyle:{borderColor:"#999"},emphasis:{iconStyle:{borderColor:"#666"}}},legend:{textStyle:{color:"#eeeeee"}},tooltip:{axisPointer:{lineStyle:{color:"#eeeeee",width:"0"},crossStyle:{color:"#eeeeee",width:"0"}}},timeline:{lineStyle:{color:"#eeeeee",width:1},itemStyle:{color:"#dd6b66",borderWidth:1},controlStyle:{color:"#eeeeee",borderColor:"#eeeeee",borderWidth:.5},checkpointStyle:{color:"#e43c59",borderColor:"#c23531"},label:{color:"#eeeeee"},emphasis:{itemStyle:{color:"#a9334c"},controlStyle:{color:"#eeeeee",borderColor:"#eeeeee",borderWidth:.5},label:{color:"#eeeeee"}}},visualMap:{color:["#bf444c","#d88273","#f6efa6"]},dataZoom:{backgroundColor:"rgba(47,69,84,0)",dataBackgroundColor:"rgba(255,255,255,0.3)",fillerColor:"rgba(167,183,204,0.4)",handleColor:"#a7b7cc",handleSize:"100%",textStyle:{color:"#eeeeee"}},markPoint:{label:{color:"#eee"},emphasis:{label:{color:"#eee"}}}};ae["l"]("myTheme",me),i["default"].component("v-chart",M["b"]),i["default"].config.productionTip=!1,i["default"].use(K.a),i["default"].prototype.$axios=ee.a,ee.a.defaults.baseURL="http://47.117.116.187:8848/",ee.a.defaults.headers.post["Content-Type"]="application/json",new i["default"]({render:function(e){return e(Y)}}).$mount("#app")},"85ec":function(e,t,a){},"9b5e":function(e,t,a){},a83d:function(e,t,a){},aa2b:function(e,t,a){"use strict";a("9b5e")},ba93:function(e,t,a){},bd26:function(e,t,a){"use strict";a("f670")},d508:function(e,t,a){"use strict";a("fa1c")},d7b3:function(e,t,a){"use strict";a("2a13")},e550:function(e,t,a){"use strict";a("fcdf")},f670:function(e,t,a){},fa1c:function(e,t,a){},fcdf:function(e,t,a){}});
//# sourceMappingURL=app.c5eb70d0.js.map