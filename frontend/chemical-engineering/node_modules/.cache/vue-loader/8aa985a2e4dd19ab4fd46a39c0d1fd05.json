{"remainingRequest":"C:\\Users\\16596\\IdeaProjects\\ProductionProactise\\frontend\\chemical-engineering\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\16596\\IdeaProjects\\ProductionProactise\\frontend\\chemical-engineering\\src\\components\\layout\\ImageCanvas.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\16596\\IdeaProjects\\ProductionProactise\\frontend\\chemical-engineering\\src\\components\\layout\\ImageCanvas.vue","mtime":1625799728584},{"path":"C:\\Users\\16596\\IdeaProjects\\ProductionProactise\\frontend\\chemical-engineering\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\16596\\IdeaProjects\\ProductionProactise\\frontend\\chemical-engineering\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\16596\\IdeaProjects\\ProductionProactise\\frontend\\chemical-engineering\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\16596\\IdeaProjects\\ProductionProactise\\frontend\\chemical-engineering\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQoNCmltcG9ydCBJbmZvTWVudSBmcm9tICcuLi9pbmZvLWNvbXBvbmVudC9JbmZvTWVudScNCmltcG9ydCBlQ2hhcnRzIGZyb20gJy4uL2luZm8tY29tcG9uZW50L2VDaGFydHMnDQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogIkltYWdlQ2FudmFzIiwNCiAgcHJvcHM6ew0KICAgIG5hbWU6U3RyaW5nLA0KICAgIGRhdGFJbmZvOk9iamVjdCwNCiAgICB0eXBlOlN0cmluZywNCiAgfSwNCiAgZGF0YSgpIHsNCiAgICB0aGlzLmdldEdyYXBoSW1hZ2UodGhpcy5kYXRhSW5mby5lcXVpcG1lbnR1dWlkKTsNCg0KICAgIHJldHVybiB7DQogICAgICBiYXNlNjRpbWFnZTonJywNCiAgICB9Ow0KICB9LA0KICB3YXRjaCA6ew0KICAgIGRhdGFJbmZvKHZhbCAsb2xkVmFsKSB7DQogICAgICBjb25zb2xlLmxvZyh2YWwsb2xkVmFsKTsNCiAgICAgIHRoaXMuZ2V0R3JhcGhJbWFnZSh2YWwuZXF1aXBtZW50dXVpZCk7DQogICAgfQ0KICB9LA0KICBtZXRob2RzOnsNCiAgICAvL+iOt+WPluiuvuWkh+S/oeaBry8vDQogICAgZ2V0U3RhdHVzKG5vZGVJZCl7DQogICAgICAvLyBNYWtlIGEgcmVxdWVzdCBmb3IgYSB1c2VyIHdpdGggYSBnaXZlbiBJRA0KICAgICAgdGhpcy4kYXhpb3Moew0KICAgICAgICBtZXRob2Q6J2dldCcsDQogICAgICAgIHVybDonL2VxdWlwbWVudC9ub2RlLycrbm9kZUlkKycvaW5mbycsDQogICAgICAgIHJlc3BvbnNlVHlwZTonanNvbicsDQogICAgICB9KQ0KICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgew0KICAgICAgICAgICAgLy8gaGFuZGxlIHN1Y2Nlc3MNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTsNCiAgICAgICAgICAgIHZhciBwYXJzZSA9IEpTT04ucGFyc2UocmVzcG9uc2UuZGF0YSk7DQogICAgICAgICAgICBjb25zb2xlLmxvZyhwYXJzZSk7DQogICAgICAgICAgfSkNCiAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7DQogICAgICAgICAgICAvLyBoYW5kbGUgZXJyb3INCiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsNCiAgICAgICAgICB9KQ0KICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIC8vIGFsd2F5cyBleGVjdXRlZA0KICAgICAgICAgIH0pOw0KICAgIH0sDQogICAgLy/ojrflj5bpopHosLHlm77mlbDmja4vLw0KICAgIGdldERhdGEoZXF1aXBtZW50VXVpZCxwb2ludElkU3RyaW5nKXsNCiAgICAgIC8vIE1ha2UgYSByZXF1ZXN0IGZvciBhIHVzZXIgd2l0aCBhIGdpdmVuIElEDQogICAgICB0aGlzLiRheGlvcyh7DQogICAgICAgIG1ldGhvZDonZ2V0JywNCiAgICAgICAgdXJsOicvdHJlbmQvJytlcXVpcG1lbnRVdWlkKycvJytwb2ludElkU3RyaW5nKycvcmVhbF90aW1lJywNCiAgICAgICAgcmVzcG9uc2VUeXBlOidqc29uJywNCiAgICAgIH0pDQogICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7DQogICAgICAgICAgICAvLyBoYW5kbGUgc3VjY2Vzcw0KICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpOw0KICAgICAgICAgICAgdmFyIHBhcnNlID0gSlNPTi5wYXJzZShyZXNwb25zZS5kYXRhKTsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKHBhcnNlKQ0KICAgICAgICAgIH0pDQogICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgew0KICAgICAgICAgICAgLy8gaGFuZGxlIGVycm9yDQogICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7DQogICAgICAgICAgfSkNCiAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAvLyBhbHdheXMgZXhlY3V0ZWQNCiAgICAgICAgICB9KTsNCiAgICB9LA0KICAgIC8v5Y6G5Y+y6LaL5Yq/5Zu+Ly8NCiAgICBnZXRIaXN0b3J5KGVxdWlwbWVudFV1aWQscG9pbnRJZFN0cmluZyxzdGFydFRpbWUsZW5kVGltZSl7DQogICAgICAvLyBNYWtlIGEgcmVxdWVzdCBmb3IgYSB1c2VyIHdpdGggYSBnaXZlbiBJRA0KICAgICAgdGhpcy4kYXhpb3Moew0KICAgICAgICBtZXRob2Q6J2dldCcsDQogICAgICAgIHVybDonL3RyZW5kLycrZXF1aXBtZW50VXVpZCsnLycrcG9pbnRJZFN0cmluZysnLycrc3RhcnRUaW1lKycvJytlbmRUaW1lKycvaW5mbycsDQogICAgICAgIHJlc3BvbnNlVHlwZTonanNvbicsDQogICAgICB9KQ0KICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgew0KICAgICAgICAgICAgLy8gaGFuZGxlIHN1Y2Nlc3MNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTsNCiAgICAgICAgICAgIHZhciBwYXJzZSA9IEpTT04ucGFyc2UocmVzcG9uc2UuZGF0YSk7DQogICAgICAgICAgICBjb25zb2xlLmxvZyhwYXJzZSkNCiAgICAgICAgICB9KQ0KICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsNCiAgICAgICAgICAgIC8vIGhhbmRsZSBlcnJvcg0KICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOw0KICAgICAgICAgIH0pDQogICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgLy8gYWx3YXlzIGV4ZWN1dGVkDQogICAgICAgICAgfSk7DQogICAgfSwNCiAgICAvL+WOhuWPsuazouW9oumikeiwseWbvi8vDQogICAgZ2V0SGlzdG9yeVdhdmUoZXF1aXBtZW50VXVpZCxwb2ludElkLHRyZW5kVGltZSx3YXZlTnVtYmVyLGFuYWx5c2lzTGluZXMpew0KICAgICAgLy8gTWFrZSBhIHJlcXVlc3QgZm9yIGEgdXNlciB3aXRoIGEgZ2l2ZW4gSUQNCiAgICAgIC8vIGxldCBpdCA9IHRoaXM7DQogICAgICB0aGlzLiRheGlvcyh7DQogICAgICAgIG1ldGhvZDonZ2V0JywNCiAgICAgICAgdXJsOicvd2F2ZS1zcGVjdHJ1bS8nK2VxdWlwbWVudFV1aWQrJy8nK3BvaW50SWQrJy8nK3RyZW5kVGltZSsnLycrd2F2ZU51bWJlcisnLycrYW5hbHlzaXNMaW5lcysnL2luZm8nLA0KICAgICAgICByZXNwb25zZVR5cGU6J2pzb24nLA0KICAgICAgfSkNCiAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgew0KICAgICAgICAvLyBoYW5kbGUgc3VjY2Vzcw0KICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7DQogICAgICAgIGxldCBwYXJzZSA9IEpTT04ucGFyc2UocmVzcG9uc2UuZGF0YSk7DQogICAgICAgIGNvbnNvbGUubG9nKHBhcnNlKTsNCiAgICAgIH0pDQogICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7DQogICAgICAgIC8vIGhhbmRsZSBlcnJvcg0KICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7DQoNCiAgICAgIH0pDQogICAgICAudGhlbihmdW5jdGlvbiAoKSB7DQogICAgICAgIC8vIGFsd2F5cyBleGVjdXRlZA0KICAgICAgfSk7DQogICAgfSwNCiAgICBnZXRHcmFwaEltYWdlKGVxdWlwbWVudFV1aWQpew0KICAgICAgbGV0IGl0ID0gdGhpczsNCiAgICAgIC8vIE1ha2UgYSByZXF1ZXN0IGZvciBhIHVzZXIgd2l0aCBhIGdpdmVuIElEDQoNCiAgICAgIHRoaXMuJGF4aW9zKHsNCiAgICAgICAgbWV0aG9kOidnZXQnLA0KICAgICAgICB1cmw6Jy9ncmFwaC8nK2VxdWlwbWVudFV1aWQrJy9pbmZvJywNCiAgICAgICAgcmVzcG9uc2VUeXBlOidqc29uJywNCiAgICAgIH0pDQogICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7DQogICAgICAgICAgICAvLyBoYW5kbGUgc3VjY2Vzcw0KICAgICAgICAgICAgbGV0IHBhcnNlID0gcmVzcG9uc2UuZGF0YTsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKHBhcnNlKTsNCiAgICAgICAgICAgIGl0LiRkYXRhLmJhc2U2NGltYWdlID0gcGFyc2UuZGF0YVswXVsnZ3JhcGhpbWFnZWJhc2U2NGNvZGUnXTsNCiAgICAgICAgICB9KQ0KICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsNCiAgICAgICAgICAgIC8vIGhhbmRsZSBlcnJvcg0KICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOw0KICAgICAgICAgICAgaXQuJGFsZXJ0KCfojrflj5blm77niYflpLHotKUnLCAn572R57uc6ZSZ6K+vJywgew0KICAgICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsDQogICAgICAgICAgICAgIGNhbGxiYWNrOiBhY3Rpb24gPT4gew0KICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgICAgICAgICAgdHlwZTogJ2Vycm9yJywNCiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGBhY3Rpb246ICR7IGFjdGlvbiB9YA0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICB9KQ0KICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIC8vIGFsd2F5cyBleGVjdXRlZA0KICAgICAgICAgIH0pOw0KICAgIH0sDQogIH0sDQoNCg0KICBjb21wb25lbnRzOnsNCiAgICBJbmZvTWVudSxlQ2hhcnRzLA0KICB9DQp9DQo="},{"version":3,"sources":["ImageCanvas.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAqBA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA","file":"ImageCanvas.vue","sourceRoot":"src/components/layout","sourcesContent":["<template>\r\n  <el-row :gutter=\"20\">\r\n    <el-col :span=\"16\">\r\n      <div class=\"grid-content bg-purple\" id=\"boxes\">\r\n        <img  v-if=\"type==='设备概貌图'\" :src=\"'data:image/jepg;base64,'+base64image\" alt=\"示意图\" class=\"image\">\r\n        <e-charts v-else></e-charts>\r\n      </div>\r\n    </el-col>\r\n    <el-col :span=\"8\">\r\n      <div class=\"grid-content bg-purple\">\r\n        <InfoMenu\r\n          :name=\"name\"\r\n          :equipment-u-u-i-d=\"dataInfo.equipmentuuid\"\r\n        />\r\n      </div>\r\n    </el-col>\r\n  </el-row>\r\n</template>\r\n\r\n<script>\r\n\r\nimport InfoMenu from '../info-component/InfoMenu'\r\nimport eCharts from '../info-component/eCharts'\r\n\r\nexport default {\r\n  name: \"ImageCanvas\",\r\n  props:{\r\n    name:String,\r\n    dataInfo:Object,\r\n    type:String,\r\n  },\r\n  data() {\r\n    this.getGraphImage(this.dataInfo.equipmentuuid);\r\n\r\n    return {\r\n      base64image:'',\r\n    };\r\n  },\r\n  watch :{\r\n    dataInfo(val ,oldVal) {\r\n      console.log(val,oldVal);\r\n      this.getGraphImage(val.equipmentuuid);\r\n    }\r\n  },\r\n  methods:{\r\n    //获取设备信息//\r\n    getStatus(nodeId){\r\n      // Make a request for a user with a given ID\r\n      this.$axios({\r\n        method:'get',\r\n        url:'/equipment/node/'+nodeId+'/info',\r\n        responseType:'json',\r\n      })\r\n          .then(function (response) {\r\n            // handle success\r\n            console.log(response);\r\n            var parse = JSON.parse(response.data);\r\n            console.log(parse);\r\n          })\r\n          .catch(function (error) {\r\n            // handle error\r\n            console.log(error);\r\n          })\r\n          .then(function () {\r\n            // always executed\r\n          });\r\n    },\r\n    //获取频谱图数据//\r\n    getData(equipmentUuid,pointIdString){\r\n      // Make a request for a user with a given ID\r\n      this.$axios({\r\n        method:'get',\r\n        url:'/trend/'+equipmentUuid+'/'+pointIdString+'/real_time',\r\n        responseType:'json',\r\n      })\r\n          .then(function (response) {\r\n            // handle success\r\n            console.log(response);\r\n            var parse = JSON.parse(response.data);\r\n            console.log(parse)\r\n          })\r\n          .catch(function (error) {\r\n            // handle error\r\n            console.log(error);\r\n          })\r\n          .then(function () {\r\n            // always executed\r\n          });\r\n    },\r\n    //历史趋势图//\r\n    getHistory(equipmentUuid,pointIdString,startTime,endTime){\r\n      // Make a request for a user with a given ID\r\n      this.$axios({\r\n        method:'get',\r\n        url:'/trend/'+equipmentUuid+'/'+pointIdString+'/'+startTime+'/'+endTime+'/info',\r\n        responseType:'json',\r\n      })\r\n          .then(function (response) {\r\n            // handle success\r\n            console.log(response);\r\n            var parse = JSON.parse(response.data);\r\n            console.log(parse)\r\n          })\r\n          .catch(function (error) {\r\n            // handle error\r\n            console.log(error);\r\n          })\r\n          .then(function () {\r\n            // always executed\r\n          });\r\n    },\r\n    //历史波形频谱图//\r\n    getHistoryWave(equipmentUuid,pointId,trendTime,waveNumber,analysisLines){\r\n      // Make a request for a user with a given ID\r\n      // let it = this;\r\n      this.$axios({\r\n        method:'get',\r\n        url:'/wave-spectrum/'+equipmentUuid+'/'+pointId+'/'+trendTime+'/'+waveNumber+'/'+analysisLines+'/info',\r\n        responseType:'json',\r\n      })\r\n      .then(function (response) {\r\n        // handle success\r\n        console.log(response);\r\n        let parse = JSON.parse(response.data);\r\n        console.log(parse);\r\n      })\r\n      .catch(function (error) {\r\n        // handle error\r\n        console.log(error);\r\n\r\n      })\r\n      .then(function () {\r\n        // always executed\r\n      });\r\n    },\r\n    getGraphImage(equipmentUuid){\r\n      let it = this;\r\n      // Make a request for a user with a given ID\r\n\r\n      this.$axios({\r\n        method:'get',\r\n        url:'/graph/'+equipmentUuid+'/info',\r\n        responseType:'json',\r\n      })\r\n          .then(function (response) {\r\n            // handle success\r\n            let parse = response.data;\r\n            console.log(parse);\r\n            it.$data.base64image = parse.data[0]['graphimagebase64code'];\r\n          })\r\n          .catch(function (error) {\r\n            // handle error\r\n            console.log(error);\r\n            it.$alert('获取图片失败', '网络错误', {\r\n              confirmButtonText: '确定',\r\n              callback: action => {\r\n                this.$message({\r\n                  type: 'error',\r\n                  message: `action: ${ action }`\r\n                });\r\n              }\r\n            });\r\n          })\r\n          .then(function () {\r\n            // always executed\r\n          });\r\n    },\r\n  },\r\n\r\n\r\n  components:{\r\n    InfoMenu,eCharts,\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.image {\r\n  width: 90%;\r\n  margin: 0 5%;\r\n}\r\n</style>"]}]}